{"ast":null,"code":"import _regeneratorRuntime from\"/home/kimhankins09/Web Development/organizer-app/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/kimhankins09/Web Development/organizer-app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useEffect}from\"react\";import axios from\"axios\";import jwt_decode from\"jwt-decode\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function Login(props){var loggedIn=false;function handleCallbackResponse(response){//console.log(\"Encoded JWT ID token: \" + response.credential);\nvar userObject=jwt_decode(response.credential);var userEmail=userObject.email;var userName=userObject.name;var id=userObject.jti;saveUser(userEmail,userName,id);document.getElementById(\"signInDiv\").hidden=true;loggedIn=true;props.isLoggedIn(loggedIn);}useEffect(function(){/* global google */google.accounts.id.initialize({client_id:\"1094993871261-a0p2bbbe2t55215167an6eoll754ealg.apps.googleusercontent.com\",callback:handleCallbackResponse});google.accounts.id.renderButton(document.getElementById(\"signInDiv\"),{theme:\"outline\",size:\"large\"});},[]);function saveUser(email,name,id){var userEmail=email;var userName=name;var userID=id;var pushUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var sessionUser;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post(\"https://organizer-react-app.herokuapp.com/user\",{email:userEmail,name:userName,id:userID});case 3:sessionUser=_context.sent;console.log(sessionUser);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function pushUser(){return _ref.apply(this,arguments);};}();pushUser();}return/*#__PURE__*/_jsx(\"div\",{className:\"login\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"box text-center align-items-center\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Please Login using Google to Continue.\"}),/*#__PURE__*/_jsx(\"div\",{id:\"signInDiv\"})]})});}","map":{"version":3,"names":["React","useEffect","axios","jwt_decode","Login","props","loggedIn","handleCallbackResponse","response","userObject","credential","userEmail","email","userName","name","id","jti","saveUser","document","getElementById","hidden","isLoggedIn","google","accounts","initialize","client_id","callback","renderButton","theme","size","userID","pushUser","post","sessionUser","console","log"],"sources":["/home/kimhankins09/Web Development/organizer-app/client/src/components/Login.jsx"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport axios from \"axios\";\nimport jwt_decode from \"jwt-decode\";\n\nexport function Login(props) {\n  let loggedIn = false;\n\n  function handleCallbackResponse(response) {\n    //console.log(\"Encoded JWT ID token: \" + response.credential);\n    const userObject = jwt_decode(response.credential);\n    const userEmail = userObject.email;\n    const userName = userObject.name;\n    const id = userObject.jti;\n    saveUser(userEmail, userName, id);\n    document.getElementById(\"signInDiv\").hidden = true;\n    loggedIn = true;\n    props.isLoggedIn(loggedIn);\n  }\n\n  useEffect(() => {\n    /* global google */\n    google.accounts.id.initialize({\n      client_id:\n        \"1094993871261-a0p2bbbe2t55215167an6eoll754ealg.apps.googleusercontent.com\",\n      callback: handleCallbackResponse,\n    });\n\n    google.accounts.id.renderButton(document.getElementById(\"signInDiv\"), {\n      theme: \"outline\",\n      size: \"large\",\n    });\n  }, []);\n\n  function saveUser(email, name, id) {\n    let userEmail = email;\n    let userName = name;\n    let userID = id;\n\n    const pushUser = async () => {\n      try {\n        const sessionUser = await axios.post(\n          \"https://organizer-react-app.herokuapp.com/user\",\n          {\n            email: userEmail,\n            name: userName,\n            id: userID,\n          }\n        );\n        console.log(sessionUser);\n      } catch (e) {\n        console.log(e);\n      }\n    };\n\n    pushUser();\n  }\n\n  return (\n    <div className=\"login\">\n      <div className=\"box text-center align-items-center\">\n        <h2>Please Login using Google to Continue.</h2>\n        <div id=\"signInDiv\"></div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"0SAAA,MAAOA,MAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,MAAOC,WAAP,KAAuB,YAAvB,C,wFAEA,MAAO,SAASC,MAAT,CAAeC,KAAf,CAAsB,CAC3B,GAAIC,SAAQ,CAAG,KAAf,CAEA,QAASC,uBAAT,CAAgCC,QAAhC,CAA0C,CACxC;AACA,GAAMC,WAAU,CAAGN,UAAU,CAACK,QAAQ,CAACE,UAAV,CAA7B,CACA,GAAMC,UAAS,CAAGF,UAAU,CAACG,KAA7B,CACA,GAAMC,SAAQ,CAAGJ,UAAU,CAACK,IAA5B,CACA,GAAMC,GAAE,CAAGN,UAAU,CAACO,GAAtB,CACAC,QAAQ,CAACN,SAAD,CAAYE,QAAZ,CAAsBE,EAAtB,CAAR,CACAG,QAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCC,MAArC,CAA8C,IAA9C,CACAd,QAAQ,CAAG,IAAX,CACAD,KAAK,CAACgB,UAAN,CAAiBf,QAAjB,EACD,CAEDL,SAAS,CAAC,UAAM,CACd,mBACAqB,MAAM,CAACC,QAAP,CAAgBR,EAAhB,CAAmBS,UAAnB,CAA8B,CAC5BC,SAAS,CACP,2EAF0B,CAG5BC,QAAQ,CAAEnB,sBAHkB,CAA9B,EAMAe,MAAM,CAACC,QAAP,CAAgBR,EAAhB,CAAmBY,YAAnB,CAAgCT,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CAAhC,CAAsE,CACpES,KAAK,CAAE,SAD6D,CAEpEC,IAAI,CAAE,OAF8D,CAAtE,EAID,CAZQ,CAYN,EAZM,CAAT,CAcA,QAASZ,SAAT,CAAkBL,KAAlB,CAAyBE,IAAzB,CAA+BC,EAA/B,CAAmC,CACjC,GAAIJ,UAAS,CAAGC,KAAhB,CACA,GAAIC,SAAQ,CAAGC,IAAf,CACA,GAAIgB,OAAM,CAAGf,EAAb,CAEA,GAAMgB,SAAQ,4FAAG,2LAEa7B,MAAK,CAAC8B,IAAN,CACxB,gDADwB,CAExB,CACEpB,KAAK,CAAED,SADT,CAEEG,IAAI,CAAED,QAFR,CAGEE,EAAE,CAAEe,MAHN,CAFwB,CAFb,QAEPG,WAFO,eAUbC,OAAO,CAACC,GAAR,CAAYF,WAAZ,EAVa,+EAYbC,OAAO,CAACC,GAAR,cAZa,oEAAH,kBAARJ,SAAQ,0CAAd,CAgBAA,QAAQ,GACT,CAED,mBACE,YAAK,SAAS,CAAC,OAAf,uBACE,aAAK,SAAS,CAAC,oCAAf,wBACE,8DADF,cAEE,YAAK,EAAE,CAAC,WAAR,EAFF,GADF,EADF,CAQD"},"metadata":{},"sourceType":"module"}