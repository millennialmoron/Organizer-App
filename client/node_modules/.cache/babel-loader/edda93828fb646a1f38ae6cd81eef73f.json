{"ast":null,"code":"import _regeneratorRuntime from\"/home/kimhankins09/Web Development/organizer-app/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/kimhankins09/Web Development/organizer-app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useEffect}from\"react\";import axios from\"axios\";import jwt_decode from\"jwt-decode\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function Login(props){var loggedIn=false;function handleCallbackResponse(response){// console.log(\"Encoded JWT ID token: \" + response.credential);\nvar userObject=jwt_decode(response.credential);var userEmail=userObject.email;var userName=userObject.name;var id=userObject.jti;var userData={email:userEmail,name:userName,id:id};console.log(userData);saveUser(userData);document.getElementById(\"signInDiv\").hidden=true;loggedIn=true;props.isLoggedIn(loggedIn);}useEffect(function(){/* global google */google.accounts.id.initialize({client_id:\"1094993871261-a0p2bbbe2t55215167an6eoll754ealg.apps.googleusercontent.com\",callback:handleCallbackResponse});google.accounts.id.renderButton(document.getElementById(\"signInDiv\"),{theme:\"outline\",size:\"large\"});},[]);function saveUser(data){console.log(\"user data: \"+data);var pushUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var sessionUser;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"attempting try to push\");_context.prev=1;_context.next=4;return axios.post(\"/user\",{data:data});case 4:sessionUser=_context.sent;console.log(\"from Login comp: \"+sessionUser);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);console.log(_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return function pushUser(){return _ref.apply(this,arguments);};}();pushUser();}return/*#__PURE__*/_jsx(\"div\",{className:\"login\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"box text-center align-items-center\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Please Login using Google to Continue.\"}),/*#__PURE__*/_jsx(\"div\",{id:\"signInDiv\"})]})});}","map":{"version":3,"names":["React","useEffect","axios","jwt_decode","Login","props","loggedIn","handleCallbackResponse","response","userObject","credential","userEmail","email","userName","name","id","jti","userData","console","log","saveUser","document","getElementById","hidden","isLoggedIn","google","accounts","initialize","client_id","callback","renderButton","theme","size","data","pushUser","post","sessionUser"],"sources":["/home/kimhankins09/Web Development/organizer-app/client/src/components/Login.jsx"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport axios from \"axios\";\nimport jwt_decode from \"jwt-decode\";\n\nexport function Login(props) {\n  let loggedIn = false;\n\n  function handleCallbackResponse(response) {\n    // console.log(\"Encoded JWT ID token: \" + response.credential);\n    const userObject = jwt_decode(response.credential);\n    const userEmail = userObject.email;\n    const userName = userObject.name;\n    const id = userObject.jti;\n    let userData = {\n      email: userEmail,\n      name: userName,\n      id: id,\n    };\n    console.log(userData);\n    saveUser(userData);\n    document.getElementById(\"signInDiv\").hidden = true;\n    loggedIn = true;\n    props.isLoggedIn(loggedIn);\n  }\n\n  useEffect(() => {\n    /* global google */\n    google.accounts.id.initialize({\n      client_id:\n        \"1094993871261-a0p2bbbe2t55215167an6eoll754ealg.apps.googleusercontent.com\",\n      callback: handleCallbackResponse,\n    });\n\n    google.accounts.id.renderButton(document.getElementById(\"signInDiv\"), {\n      theme: \"outline\",\n      size: \"large\",\n    });\n  }, []);\n\n  function saveUser(data) {\n    console.log(\"user data: \" + data);\n\n    const pushUser = async () => {\n      console.log(\"attempting try to push\");\n      try {\n        const sessionUser = await axios.post(\"/user\", { data: data });\n        console.log(\"from Login comp: \" + sessionUser);\n      } catch (e) {\n        console.log(e);\n      }\n    };\n\n    pushUser();\n  }\n\n  return (\n    <div className=\"login\">\n      <div className=\"box text-center align-items-center\">\n        <h2>Please Login using Google to Continue.</h2>\n        <div id=\"signInDiv\"></div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"0SAAA,MAAOA,MAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,MAAOC,WAAP,KAAuB,YAAvB,C,wFAEA,MAAO,SAASC,MAAT,CAAeC,KAAf,CAAsB,CAC3B,GAAIC,SAAQ,CAAG,KAAf,CAEA,QAASC,uBAAT,CAAgCC,QAAhC,CAA0C,CACxC;AACA,GAAMC,WAAU,CAAGN,UAAU,CAACK,QAAQ,CAACE,UAAV,CAA7B,CACA,GAAMC,UAAS,CAAGF,UAAU,CAACG,KAA7B,CACA,GAAMC,SAAQ,CAAGJ,UAAU,CAACK,IAA5B,CACA,GAAMC,GAAE,CAAGN,UAAU,CAACO,GAAtB,CACA,GAAIC,SAAQ,CAAG,CACbL,KAAK,CAAED,SADM,CAEbG,IAAI,CAAED,QAFO,CAGbE,EAAE,CAAEA,EAHS,CAAf,CAKAG,OAAO,CAACC,GAAR,CAAYF,QAAZ,EACAG,QAAQ,CAACH,QAAD,CAAR,CACAI,QAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCC,MAArC,CAA8C,IAA9C,CACAjB,QAAQ,CAAG,IAAX,CACAD,KAAK,CAACmB,UAAN,CAAiBlB,QAAjB,EACD,CAEDL,SAAS,CAAC,UAAM,CACd,mBACAwB,MAAM,CAACC,QAAP,CAAgBX,EAAhB,CAAmBY,UAAnB,CAA8B,CAC5BC,SAAS,CACP,2EAF0B,CAG5BC,QAAQ,CAAEtB,sBAHkB,CAA9B,EAMAkB,MAAM,CAACC,QAAP,CAAgBX,EAAhB,CAAmBe,YAAnB,CAAgCT,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CAAhC,CAAsE,CACpES,KAAK,CAAE,SAD6D,CAEpEC,IAAI,CAAE,OAF8D,CAAtE,EAID,CAZQ,CAYN,EAZM,CAAT,CAcA,QAASZ,SAAT,CAAkBa,IAAlB,CAAwB,CACtBf,OAAO,CAACC,GAAR,CAAY,cAAgBc,IAA5B,EAEA,GAAMC,SAAQ,4FAAG,qJACfhB,OAAO,CAACC,GAAR,CAAY,wBAAZ,EADe,sCAGajB,MAAK,CAACiC,IAAN,CAAW,OAAX,CAAoB,CAAEF,IAAI,CAAEA,IAAR,CAApB,CAHb,QAGPG,WAHO,eAIblB,OAAO,CAACC,GAAR,CAAY,oBAAsBiB,WAAlC,EAJa,+EAMblB,OAAO,CAACC,GAAR,cANa,oEAAH,kBAARe,SAAQ,0CAAd,CAUAA,QAAQ,GACT,CAED,mBACE,YAAK,SAAS,CAAC,OAAf,uBACE,aAAK,SAAS,CAAC,oCAAf,wBACE,8DADF,cAEE,YAAK,EAAE,CAAC,WAAR,EAFF,GADF,EADF,CAQD"},"metadata":{},"sourceType":"module"}